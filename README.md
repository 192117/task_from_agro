# Веб-сервис, выгружающий космические снимки и определяющий NDVI на поле, предоставляя REST API.

## Стек:
1. Python 3.8
2. FastAPI
3. Docker
4. PostgreSQL
5. SQLAlchemy
6. Sentinelsat
7. Rasterio

## Функционал:

1. Можно добавить и удалить сельхоз поле в формате GeoJSON.
2. Получить снимок поля по API поставщиков космических снимвков (sentinelsat)
3. Получить изображение поля с NDVI.

## Описание работы веб-сервиса:

* /add

Принимает POST запрос в формате [GeoJSON](https://ru.wikipedia.org/w/index.php?title=GeoJSON&stable=1). Обязательно наличие поля `name`.

Пример:

```
{
    "type": "FeatureCollection",
    "features": [
        {
            "type": "Feature",
            "properties": {
                "name": "Ottawa"
            },
            "geometry": {
                "type": "Polygon",
                "coordinates": [
                    [
                        [
                            -75.68351745605469,
                            45.41279785553127
                        ],
                        [
                            -75.68351745605469,
                            45.43495571986105
                        ],
                        [
                            -75.6424331665039,
                            45.43495571986105
                        ],
                        [
                            -75.6424331665039,
                            45.41279785553127
                        ],
                        [
                            -75.68351745605469,
                            45.41279785553127
                        ]
                    ]
                ]
            }
        }
    ]
}
```

В случае успешного запроса сервер ответит:

```
Success! For NDVI and SNAPSHOT, use the name = EXAMPLE.
```

* /show/

Принимает GET запрос с параметром `name`.

В случае успешного запроса отправляет изображение в формате `.tiff`. (Изображение весит в среднем более 400 МБ)

* /ndvi/

Принимает GET запрос с параметром `name`.

В случае успешного запроса отправляет изображение в формате `.tiff`. (Изображение весит в среднем более 400 МБ)

* /delete/

Принимает GET запрос с параметром `name`.

Удаляет всё прилагающееся к данному ключу (запись из бд, файлы). В случае успешного запроса сервер ответит:

```
Success!
```

### Коллекция [POSTMAN](https://github.com/192117/task_from_agro/blob/master/AGRO.postman_collection.json)

## Доступ к серверу:

- [Документация FastAPI](http://157.90.14.181:8002/docs/)